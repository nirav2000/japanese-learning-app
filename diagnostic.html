<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagnostic Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-result {
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            font-size: 16px;
        }
        .pass {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .fail {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        h1 {
            color: #333;
        }
        pre {
            background: #fff;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>JavaScript Learning App - Diagnostic Test</h1>
    <p>This page tests if all JavaScript files are loading correctly.</p>

    <div id="results"></div>

    <script src="japanese-data.js"></script>
    <script src="french-data.js"></script>
    <script src="gujarati-data.js"></script>
    <script src="data.js"></script>

    <script>
        const results = document.getElementById('results');
        const tests = [];

        function addTest(name, condition, details = '') {
            tests.push({ name, pass: condition, details });
        }

        // Test 1: Check if japaneseData is defined
        addTest(
            'japanese-data.js loaded',
            typeof japaneseData !== 'undefined',
            typeof japaneseData !== 'undefined' ? `Contains ${Object.keys(japaneseData).length} modes` : 'Variable not found'
        );

        // Test 2: Check if frenchData is defined
        addTest(
            'french-data.js loaded',
            typeof frenchData !== 'undefined',
            typeof frenchData !== 'undefined' ? `Contains ${Object.keys(frenchData).length} modes` : 'Variable not found'
        );

        // Test 3: Check if gujaratiData is defined
        addTest(
            'gujarati-data.js loaded',
            typeof gujaratiData !== 'undefined',
            typeof gujaratiData !== 'undefined' ? `Contains ${Object.keys(gujaratiData).length} modes` : 'Variable not found'
        );

        // Test 4: Check if languageConfig is defined
        addTest(
            'languageConfig (data.js) loaded',
            typeof languageConfig !== 'undefined',
            typeof languageConfig !== 'undefined' ? `Contains ${Object.keys(languageConfig).length} languages` : 'Variable not found'
        );

        // Test 5: Check if languageData is defined
        addTest(
            'languageData (data.js) loaded',
            typeof languageData !== 'undefined',
            typeof languageData !== 'undefined' ? `Links to ${Object.keys(languageData).length} language datasets` : 'Variable not found'
        );

        // Test 6: Check if charToRomaji is defined
        addTest(
            'charToRomaji (data.js) loaded',
            typeof charToRomaji !== 'undefined',
            typeof charToRomaji !== 'undefined' ? `Contains ${Object.keys(charToRomaji).length} character mappings` : 'Variable not found'
        );

        // Test 7: Verify Japanese data structure
        if (typeof japaneseData !== 'undefined') {
            addTest(
                'japaneseData.hiragana exists',
                japaneseData.hiragana && Array.isArray(japaneseData.hiragana),
                japaneseData.hiragana ? `${japaneseData.hiragana.length} hiragana characters` : 'Not an array'
            );
        }

        // Test 8: Verify languageConfig structure
        if (typeof languageConfig !== 'undefined' && languageConfig.japanese) {
            addTest(
                'languageConfig.japanese.modes exists',
                Array.isArray(languageConfig.japanese.modes),
                languageConfig.japanese.modes ? `Modes: ${languageConfig.japanese.modes.join(', ')}` : 'Not an array'
            );
        }

        // Display results
        let html = '';
        let passCount = 0;

        tests.forEach(test => {
            const className = test.pass ? 'pass' : 'fail';
            const icon = test.pass ? '✓' : '✗';
            if (test.pass) passCount++;

            html += `
                <div class="test-result ${className}">
                    <strong>${icon} ${test.name}</strong>
                    ${test.details ? `<br><small>${test.details}</small>` : ''}
                </div>
            `;
        });

        html = `<h2>Results: ${passCount}/${tests.length} tests passed</h2>` + html;

        // Add summary
        if (passCount === tests.length) {
            html += `
                <div class="test-result pass" style="margin-top: 20px;">
                    <strong>✓ All tests passed!</strong><br>
                    <small>All JavaScript files are loading correctly. The main app should work.</small>
                </div>
            `;
        } else {
            html += `
                <div class="test-result fail" style="margin-top: 20px;">
                    <strong>✗ Some tests failed</strong><br>
                    <small>One or more JavaScript files are not loading. Check the failed tests above.</small>
                </div>
            `;
        }

        results.innerHTML = html;

        // Log to console for debugging
        console.log('Diagnostic Results:', tests);
    </script>
</body>
</html>
